<th:block th:replace="fragments/layout :: layout('今日のやること', ~{::section})">
    <section>
        <h2>📅 今日の日付：<span th:text="${today}"></span></h2>

        <h3>✅ 今日のやること</h3>
        <ul style="list-style:none;padding-left:0">
            <li th:each="task : ${tasks}" class="card" style="margin-bottom:10px">
                <form th:action="@{/update}" method="post">
                    <input type="hidden" name="id" th:value="${task.id}" />
                    <label>
                        <input type="checkbox" name="done" th:checked="${task.done}" onchange="this.form.submit()">
                        <span th:text="${task.task}"></span>
                    </label>
                    <div style="margin-top:8px">
                        <input type="text" name="comment" th:value="${task.comment}"
                               placeholder="コメントを書く..." style="width:100%" onchange="this.form.submit()">
                    </div>
                </form>
            </li>
        </ul>

        <h3>➕ 新しいやることを追加</h3>
        <form action="/add" method="post" class="card">
            <input type="text" name="task" placeholder="やることを入力" required style="width:100%">
            <button class="btn" type="submit" style="margin-top:10px">追加</button>
        </form>

        <p style="margin-top:18px"><a th:href="@{/history}">📅 過去の履歴を見る</a></p>
    </section>
</th:block>
